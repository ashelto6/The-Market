{% extends 'base.html' %}

{% block title %} Home {% endblock %}

{% block date %} {{date}} {% endblock %}

{% block content %}

{% with messages = get_flashed_messages() %}
{% if messages %}
<div class="notification is-success">
  {{ messages[0] }}
</div>
{% endif %}
{% endwith %}

<a href="#top"></a>

<br>
<br>
<div class="container">
  <div id="carouselExampleCaptions" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators">
      <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active"></li>
      <li data-target="#carouselExampleCaptions" data-slide-to="1"></li>
      <li data-target="#carouselExampleCaptions" data-slide-to="2"></li>
    </ol>
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="/static/images/2021.jpg" class="darkened-image d-block w-100" alt="2021">
        <div class="carousel-caption d-md-block">
          <h5 class="carousel-caption d-none d-md-block"><b><big>Stocks To Watch: Square Among 7 Stocks Expecting Up
                To 128% Growth In 2021</big></b></h5>
          <span class="caro-link-bg"><a
              href="https://www.investors.com/research/fastest-growing-stocks-to-watch-2021/?src=A00220"
              target="_blank">Click here to read article</a></span>
        </div>
      </div>
      <div class="carousel-item">
        <img src="/static/images/red-day.jpg" class="darkened-image d-block w-100" alt="red-day">
        <div class="carousel-caption d-md-block">
          <h5 class="carousel-caption d-none d-md-block"><b><big>Dow Jones Futures: Stress Test Your Portfolio;
                Apple, Nio Flash Sell Signals;</big></b></h5>
          <span class="caro-link-bg"> <a
              href="https://www.investors.com/market-trend/stock-market-today/dow-jones-futures-stress-test-your-stock-portfolio-apple-nio-sell-roku-earnings/?src=A00220"
              target="_blank">Click here to read article</a></span>
        </div>
      </div>
      <div class="carousel-item">
        <img src="/static/images/Blue---the-colour-008.jpg" class="darkened-image d-block w-100" alt="...">
        <div class="carousel-caption d-md-block">
          <h5 class="carousel-caption d-none d-md-block"><b><big>In Development</big></b></h5>
          <span class="caro-link-bg"><a href="#">Click here to read article</a></span>
        </div>
      </div>
    </div>
    <a class="carousel-control-prev" href="#carouselExampleCaptions" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleCaptions" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
</div>

<br>
<div class="container">
  <hr>
</div>

<div class="container"><small>
    <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item" role="presentation">
        <a class="nav-link active" id="penny-tab" data-toggle="tab" href="#penny" role="tab" aria-controls="penny"
          aria-selected="true">Pennys</a>
      </li>
      <li class="nav-item" role="presentation">
        <a class="nav-link" id="midcap-tab" data-toggle="tab" href="#midcap" role="tab" aria-controls="midcap"
          aria-selected="false">Mid-Caps</a>
      </li>
      <li class="nav-item" role="presentation">
        <a class="nav-link" id="largecap-tab" data-toggle="tab" href="#largecap" role="tab" aria-controls="largecap"
          aria-selected="false">Large Caps</a>
      </li>
    </ul>
  </small>
  <!-- Tab panes -->

  <button onclick="topFunction()" id="myBtn" title="Go to top">Tabs</button>
  <div class="tab-content">
    <br>
    <!--------------------------------------------------- PENNY CARDS --------------------------------------------------------->
    <div class="tab-pane fade show active" id="penny" role="tabpanel" aria-labelledby="penny-tab">
      <div class="container-home">
        <div class="text-center">
          <span id="update_PSdata">{% for ticker in PSdata %}
            {% if ticker.lastPrice < ticker.closePrice %}
            <!-- Penny: if red day -->
            <div class="col mb-4">
              <div class="card card-red">
                <div class="card-body">
                  <h5 class="card-title">{{ticker.symbol}}
                  </h5>
                  <p><b>Price</b>: {{"$%.2f"|format(ticker.lastPrice)}} <span
                      style="color: red;">({{"%.2f"|format("%.2f"|format(ticker.lastPrice)|float - "%.2f"|format(ticker.closePrice)|float)}})</span>
                  </p>
                  <!--<p>
                      <a class="btn btn-sm btn-danger" data-toggle="collapse" href="#{{ticker.symbol}}H" role="button"
                        aria-expanded="false" aria-controls="{{ticker.symbol}}H">
                        More
                      </a>
                    </p>-->
                  <!--<div class="collapse" id="{{ticker.symbol}}H">-->
                  <div class="card card-body">
                    <p><b>Open</b>: {{"$%.2f"|format(ticker.openPrice)}}</p>
                    <p><b>High</b>: {{"$%.2f"|format(ticker.highPrice)}}</p>
                    <p><b>Low</b>: {{"$%.2f"|format(ticker.lowPrice)}}</p>
                    <p><b>Last Close</b>: {{"$%.2f"|format(ticker.closePrice)}}</p>
                    <p><b>Volume</b>: {{ticker.totalVolume}}</p>
                  </div>
                  <!--</div>-->
                </div>
              </div>
            </div>
            {% elif ticker.lastPrice > ticker.closePrice %}
            <!-- Penny: if green day -->
            <div class="col mb-4">
              <div class="card card-green">
                <div class="card-body">
                  <h5 class="card-title">{{ticker.symbol}}
                  </h5>
                  <p><b>Price</b>: {{"$%.2f"|format(ticker.lastPrice)}} <span
                      style="color: green;">(+{{"%.2f"|format("%.2f"|format(ticker.lastPrice)|float - "%.2f"|format(ticker.closePrice)|float)}})</span>
                  </p>
                  <!--<p>
                      <a class="btn btn-sm btn-success" data-toggle="collapse" href="#{{ticker.symbol}}H" role="button"
                        aria-expanded="false" aria-controls="{{ticker.symbol}}H">
                        More
                      </a>
                    </p>-->
                  <!--<div class="collapse" id="{{ticker.symbol}}H">-->
                  <div class="card card-body">
                    <p><b>Open</b>: {{"$%.2f"|format(ticker.openPrice)}}</p>
                    <p><b>High</b>: {{"$%.2f"|format(ticker.highPrice)}}</p>
                    <p><b>Low</b>: {{"$%.2f"|format(ticker.lowPrice)}}</p>
                    <p><b>Last Close</b>: {{"$%.2f"|format(ticker.closePrice)}}</p>
                    <p><b>Volume</b>: {{ticker.totalVolume}}</p>
                  </div>
                  <!--</div>-->
                </div>
              </div>
            </div>
            {% else %}
            <!-- Penny: if break even day -->
            <div class="col mb-4">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">{{ticker.symbol}}
                  </h5>
                  <p><b>Price</b>: {{"$%.2f"|format(ticker.lastPrice)}}
                    <span
                      style="color: gray;">(±{{"%.2f"|format("%.2f"|format(ticker.lastPrice)|float - "%.2f"|format(ticker.closePrice)|float)}})</span>
                  </p>
                  <!--<p>
                      <a class="btn btn-sm btn-secondary" data-toggle="collapse" href="#{{ticker.symbol}}H"
                        role="button" aria-expanded="false" aria-controls="{{ticker.symbol}}H">
                        More
                      </a>
                    </p>-->
                  <!--<div class="collapse" id="{{ticker.symbol}}H">-->
                  <div class="card card-body">
                    <p><b>Open</b>: {{"$%.2f"|format(ticker.openPrice)}}</p>
                    <p><b>High</b>: {{"$%.2f"|format(ticker.highPrice)}}</p>
                    <p><b>Low</b>: {{"$%.2f"|format(ticker.lowPrice)}}</p>
                    <p><b>Last Close</b>: {{"$%.2f"|format(ticker.closePrice)}}</p>
                    <p><b>Volume</b>: {{ticker.totalVolume}}</p>
                  </div>
                  <!--</div>-->
                </div>
              </div>
            </div>
            {% endif %}
            {% endfor %}
          </span>
        </div>
      </div>
      <div class="text-right">
        <a id="btt" class="button is-dark is-rounded is-small" href="#top">
          Back to top
        </a>
      </div>
    </div>
    <!------------------------------------------------ MID CAP CARDS ------------------------------------------------->
    <div class="tab-pane fade" id="midcap" role="tabpanel" aria-labelledby="midcap-tab">
      <div class="container-home">
        <div class="text-center">
          <div class="row-cols-md-2">
            <span id="update_MCdata">{% for ticker in MCdata %}
              {% if ticker.lastPrice < ticker.closePrice %}
              <!-- Mid: if red day -->
              <div class="col mb-4">
                <div class="card card-red">
                  <div class="card-body">
                    <h5 class="card-title">{{ticker.symbol}}
                    </h5>
                    <p><b>Price</b>: {{"$%.2f"|format(ticker.lastPrice)}} <span
                        style="color: red;">({{"%.2f"|format("%.2f"|format(ticker.lastPrice)|float - "%.2f"|format(ticker.closePrice)|float)}})</span>
                    </p>
                    <!--<p>
                      <a class="btn btn-sm btn-danger" data-toggle="collapse" href="#{{ticker.symbol}}H" role="button"
                        aria-expanded="false" aria-controls="{{ticker.symbol}}H">
                        More
                      </a>
                    </p>-->
                    <!--<div class="collapse" id="{{ticker.symbol}}H">-->
                    <div class="card card-body">
                      <p><b>Open</b>: {{"$%.2f"|format(ticker.openPrice)}}</p>
                      <p><b>High</b>: {{"$%.2f"|format(ticker.highPrice)}}</p>
                      <p><b>Low</b>: {{"$%.2f"|format(ticker.lowPrice)}}</p>
                      <p><b>Last Close</b>: {{"$%.2f"|format(ticker.closePrice)}}</p>
                      <p><b>Volume</b>: {{ticker.totalVolume}}</p>
                    </div>
                    <!--</div>-->
                  </div>
                </div>
              </div>
              {% elif ticker.lastPrice > ticker.closePrice %}
              <!-- Mid: if green day -->
              <div class="col mb-4">
                <div class="card card-green">
                  <div class="card-body">
                    <h5 class="card-title">{{ticker.symbol}}
                    </h5>
                    <p><b>Price</b>: {{"$%.2f"|format(ticker.lastPrice)}} <span
                        style="color: green;">(+{{"%.2f"|format("%.2f"|format(ticker.lastPrice)|float - "%.2f"|format(ticker.closePrice)|float)}})</span>
                    </p>
                    <!--<p>
                      <a class="btn btn-sm btn-success" data-toggle="collapse" href="#{{ticker.symbol}}H" role="button"
                        aria-expanded="false" aria-controls="{{ticker.symbol}}H">
                        More
                      </a>
                    </p>-->
                    <!--<div class="collapse" id="{{ticker.symbol}}H">-->
                    <div class="card card-body">
                      <p><b>Open</b>: {{"$%.2f"|format(ticker.openPrice)}}</p>
                      <p><b>High</b>: {{"$%.2f"|format(ticker.highPrice)}}</p>
                      <p><b>Low</b>: {{"$%.2f"|format(ticker.lowPrice)}}</p>
                      <p><b>Last Close</b>: {{"$%.2f"|format(ticker.closePrice)}}</p>
                      <p><b>Volume</b>: {{ticker.totalVolume}}</p>
                    </div>
                    <!--</div>-->
                  </div>
                </div>
              </div>
              {% else %}
              <!-- Mid: if break even day -->
              <div class="col mb-4">
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title">{{ticker.symbol}}
                    </h5>
                    <p><b>Price</b>: {{"$%.2f"|format(ticker.lastPrice)}} <span
                        style="color: gray;">(±{{"%.2f"|format("%.2f"|format(ticker.lastPrice)|float - "%.2f"|format(ticker.closePrice)|float)}})</span>
                    </p>
                    <!--<p>
                      <a class="btn btn-sm btn-secondary" data-toggle="collapse" href="#{{ticker.symbol}}H"
                        role="button" aria-expanded="false" aria-controls="{{ticker.symbol}}H">
                        More
                      </a>
                    </p>-->
                    <!--<div class="collapse" id="{{ticker.symbol}}H">-->
                    <div class="card card-body">
                      <p><b>Open</b>: {{"$%.2f"|format(ticker.openPrice)}}</p>
                      <p><b>High</b>: {{"$%.2f"|format(ticker.highPrice)}}</p>
                      <p><b>Low</b>: {{"$%.2f"|format(ticker.lowPrice)}}</p>
                      <p><b>Last Close</b>: {{"$%.2f"|format(ticker.closePrice)}}</p>
                      <p><b>Volume</b>: {{ticker.totalVolume}}</p>
                    </div>
                    <!--</div>-->
                  </div>
                </div>
              </div>
              {% endif %}
              {% endfor %}
            </span>
          </div>
        </div>
      </div>
      <div class="text-right">
        <a id="btt" class="button is-dark is-rounded is-small" href="#top">
          Back to top
        </a>
      </div>
    </div>
    <!-------------------------------------- LARGE CAP CARDS -------------------------------------------->
    <div class="tab-pane fade" id="largecap" role="tabpanel" aria-labelledby="largecap-tab">
      <div class="container-home">
        <div class="text-center">
          <div class="row-cols-md-2">
            <span id="update_LCdata">{% for ticker in LCdata %}
              {% if ticker.lastPrice < ticker.closePrice %}
              <!-- Large: if red day -->
              <div class="col mb-4">
                <div class="card card-red">
                  <div class="card-body">
                    <h5 class="card-title">{{ticker.symbol}}
                    </h5>
                    <p><b>Price</b>: {{"$%.2f"|format(ticker.lastPrice)}} <span
                        style="color: red;">({{"%.2f"|format("%.2f"|format(ticker.lastPrice)|float - "%.2f"|format(ticker.closePrice)|float)}})</span>
                    </p>
                    <!--<p>
                      <a class="btn btn-sm btn-danger" data-toggle="collapse" href="#{{ticker.symbol}}H" role="button"
                        aria-expanded="false" aria-controls="{{ticker.symbol}}H">
                        More
                      </a>
                    </p>-->
                    <!--<div class="collapse" id="{{ticker.symbol}}H">-->
                    <div class="card card-body">
                      <p><b>Open</b>: {{"$%.2f"|format(ticker.openPrice)}}</p>
                      <p><b>High</b>: {{"$%.2f"|format(ticker.highPrice)}}</p>
                      <p><b>Low</b>: {{"$%.2f"|format(ticker.lowPrice)}}</p>
                      <p><b>Last Close</b>: {{"$%.2f"|format(ticker.closePrice)}}</p>
                      <p><b>Volume</b>: {{ticker.totalVolume}}</p>
                    </div>
                    <!--</div>-->
                  </div>
                </div>
              </div>
              {% elif ticker.lastPrice > ticker.closePrice %}
              <!-- Large: if green day -->
              <div class="col mb-4">
                <div class="card card-green">
                  <div class="card-body">
                    <h5 class="card-title">{{ticker.symbol}}
                    </h5>
                    <p><b>Price</b>: {{"$%.2f"|format(ticker.lastPrice)}} <span
                        style="color: green;">(+{{"%.2f"|format("%.2f"|format(ticker.lastPrice)|float - "%.2f"|format(ticker.closePrice)|float)}})</span>
                    </p>
                    <!--<p>
                      <a class="btn btn-sm btn-success" data-toggle="collapse" href="#{{ticker.symbol}}H" role="button"
                        aria-expanded="false" aria-controls="{{ticker.symbol}}H">
                        More
                      </a>
                    </p>-->
                    <!--<div class="collapse" id="{{ticker.symbol}}H">-->
                    <div class="card card-body">
                      <p><b>Open</b>: {{"$%.2f"|format(ticker.openPrice)}}</p>
                      <p><b>High</b>: {{"$%.2f"|format(ticker.highPrice)}}</p>
                      <p><b>Low</b>: {{"$%.2f"|format(ticker.lowPrice)}}</p>
                      <p><b>Last Close</b>: {{"$%.2f"|format(ticker.closePrice)}}</p>
                      <p><b>Volume</b>: {{ticker.totalVolume}}</p>
                    </div>
                    <!--</div>-->
                  </div>
                </div>
              </div>
              {% else %}
              <!-- Large: if break even day -->
              <div class="col mb-4">
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title">{{ticker.symbol}}
                    </h5>
                    <p><b>Price</b>: {{"$%.2f"|format(ticker.lastPrice)}} <span
                        style="color: gray;">(±{{"%.2f"|format("%.2f"|format(ticker.lastPrice)|float - "%.2f"|format(ticker.closePrice)|float)}})</span>
                    </p>
                    <!--<p>
                      <a class="btn btn-sm btn-secondary" data-toggle="collapse" href="#{{ticker.symbol}}H"
                        role="button" aria-expanded="false" aria-controls="{{ticker.symbol}}H">
                        More
                      </a>
                    </p>-->
                    <!--<div class="collapse" id="{{ticker.symbol}}H">-->
                    <div class="card card-body">
                      <p><b>Open</b>: {{"$%.2f"|format(ticker.openPrice)}}</p>
                      <p><b>High</b>: {{"$%.2f"|format(ticker.highPrice)}}</p>
                      <p><b>Low</b>: {{"$%.2f"|format(ticker.lowPrice)}}</p>
                      <p><b>Last Close</b>: {{"$%.2f"|format(ticker.closePrice)}}</p>
                      <p><b>Volume</b>: {{ticker.totalVolume}}</p>
                    </div>
                    <!--</div>-->
                  </div>
                </div>
              </div>
              {% endif %}
              {% endfor %}
            </span>
          </div>
        </div>
      </div>
      <div class="text-right">
        <a class="button is-dark is-rounded is-small" href="#top">
          Back to top
        </a>
      </div>
    </div>

  </div>
</div>
<br><br>
<br>


<!-- AJAX -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script>
  $(function () {
    window.setInterval(function () {
      loadNewPSdata()
    }, 2500)

    function loadNewPSdata() {
      $.ajax({
        url: "/update_PSdata",
        type: "POST",
        dataType: "json",
        success: function (data) {
          $(update_PSdata).replaceWith(data)
        }

      });
    }
  });

  $(function () {
    window.setInterval(function () {
      loadNewMCdata()
    }, 2500)

    function loadNewMCdata() {
      $.ajax({
        url: "/update_MCdata",
        type: "POST",
        dataType: "json",
        success: function (data) {
          $(update_MCdata).replaceWith(data)
        }

      });
    }
  });

  $(function () {
    window.setInterval(function () {
      loadNewLCdata()
    }, 2500)

    function loadNewLCdata() {
      $.ajax({
        url: "/update_LCdata",
        type: "POST",
        dataType: "json",
        success: function (data) {
          $(update_LCdata).replaceWith(data)
        }

      });
    }
  });

  mybutton = document.getElementById("myBtn");

  // When the user scrolls down 700px from the top of the document, show the button
  window.onscroll = function () {
    scrollFunction()
  };

  function scrollFunction() {
    if (document.body.scrollTop > 700 || document.documentElement.scrollTop > 700) {
      mybutton.style.display = "block";
    } else {
      mybutton.style.display = "none";
    }

  }

  // When the user clicks on the button, scroll to the spot of the document
  function topFunction() {
    document.body.scrollTop = 350; // For Safari
    document.documentElement.scrollTop = 350; // For Chrome, Firefox, IE and Opera
  }
</script>

{% endblock %}